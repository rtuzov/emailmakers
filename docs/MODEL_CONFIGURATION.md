# –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ AI –º–æ–¥–µ–ª–∏

## –û–±–∑–æ—Ä

Email-Makers –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `USAGE_MODEL`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ñ–∞–π–ª–µ `.env.local`:

```env
# –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è backend –æ–ø–µ—Ä–∞—Ü–∏–π
USAGE_MODEL=gpt-4o-mini

# –ú–æ–¥–µ–ª—å –¥–ª—è frontend –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–æ–ª–∂–Ω–∞ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å USAGE_MODEL)
NEXT_PUBLIC_USAGE_MODEL=gpt-4o-mini
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

- `gpt-4o-mini` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ)
- `gpt-4o` (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –≤—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å)
- `gpt-4` (–ø—Ä–µ–¥—ã–¥—É—â–µ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ)
- `gpt-3.5-turbo` (–±—ã—Å—Ç—Ä–∞—è, –Ω–æ –º–µ–Ω–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è)
- `claude-3-5-sonnet-20241022` (Anthropic, –¥–ª—è –±—É–¥—É—â–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### Backend (Node.js)

```typescript
import { getUsageModel, getValidatedUsageModel } from '../shared/utils/model-config';

// –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
const model = getUsageModel(); // –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç USAGE_MODEL –∏–ª–∏ 'gpt-4o-mini'

// –° –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
const validModel = getValidatedUsageModel(); // –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ OpenAI API
const response = await openai.chat.completions.create({
  model: getUsageModel(),
  messages: [...],
});
```

### Frontend (React)

```typescript
import { getPublicUsageModel } from '../shared/utils/model-config';

// –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI
const currentModel = getPublicUsageModel(); // –∏—Å–ø–æ–ª—å–∑—É–µ—Ç NEXT_PUBLIC_USAGE_MODEL
```

## –§–∞–π–ª—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É

### Core Agent
- `src/agent/agent.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π –∞–≥–µ–Ω—Ç
- `src/agent/tools/copy.ts` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `src/agent/tools/patch.ts` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è HTML

### Figma Integration
- `src/agent/tools/figma.ts` - —Ä–∞–±–æ—Ç–∞ —Å Figma API
- `src/agent/tools/figma-sprite-splitter.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø—Ä–∞–π—Ç–æ–≤
- `src/agent/tools/figma-all-pages-processor.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

### AI Consultant
- `src/agent/tools/ai-quality-consultant.ts` - –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∫–∞—á–µ—Å—Ç–≤–∞
- `src/agent/tools/ai-consultant/ai-consultant.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
- `src/agent/tools/ai-consultant/types.ts` - —Ç–∏–ø—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API Endpoints
- `src/app/api/figma/process-single-page/route.ts` - API –¥–ª—è Figma

### UI Components
- `src/ui/components/email/simple-live-preview.tsx` - –ø—Ä–µ–≤—å—é
- `src/ui/components/email/live-preview.tsx` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ø—Ä–µ–≤—å—é

### Scripts
- `scripts/validate-identica-folder.js` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- `scripts/test-openai-agent.js` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

## –°–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏

–î–ª—è —Å–º–µ–Ω—ã –º–æ–¥–µ–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `.env.local`:

```env
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–æ–¥–µ–ª—å
USAGE_MODEL=gpt-4o
NEXT_PUBLIC_USAGE_MODEL=gpt-4o

# –ò–ª–∏ –Ω–∞ –±–æ–ª–µ–µ —ç–∫–æ–Ω–æ–º–∏—á–Ω—É—é
USAGE_MODEL=gpt-3.5-turbo
NEXT_PUBLIC_USAGE_MODEL=gpt-3.5-turbo
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
2. –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å

## –°—Ç–æ–∏–º–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π (–ø—Ä–∏–º–µ—Ä–Ω–∞—è)

| –ú–æ–¥–µ–ª—å | Input (–∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤) | Output (–∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤) | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|----------------------|------------------------|--------------|
| gpt-4o-mini | $0.15 | $0.60 | ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ |
| gpt-4o | $5.00 | $15.00 | üí∞ –î–æ—Ä–æ–≥–æ |
| gpt-4 | $30.00 | $60.00 | üí∏ –û—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ |
| gpt-3.5-turbo | $0.50 | $1.50 | ‚ö° –ë—ã—Å—Ç—Ä–æ, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∏–∂–µ |

## –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–¥–µ–ª–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏:

```typescript
// –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –º–æ–¥–µ–ª—å
USAGE_MODEL=invalid-model

// –°–∏—Å—Ç–µ–º–∞ –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback
console.warn('Invalid model "invalid-model" in USAGE_MODEL, falling back to gpt-4o-mini');
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å –∂–µ—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

–í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –°—Ç–∞—Ä—ã–µ –∂–µ—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```typescript
// –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± ‚ùå
model: "gpt-4o-mini"
model: process.env.OPENAI_MODEL || "gpt-4o-mini"

// –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± ‚úÖ
model: getUsageModel()
```

## Troubleshooting

### –ú–æ–¥–µ–ª—å –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `.env.local` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### –û—à–∏–±–∫–∏ API
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–∫–∞–∑–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –≤–∞—à–µ–º OpenAI –∞–∫–∫–∞—É–Ω—Ç–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–≤–æ—Ç—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–µ–π

### –í—ã—Å–æ–∫–∏–µ —Ä–∞—Å—Ö–æ–¥—ã
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ `gpt-4o-mini` –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏
2. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ OpenAI Dashboard
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–º–∏—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö OpenAI 