graph TD
    subgraph "ğŸ“Š DATA COLLECTION â†’ CONTENT"
        DCH["ğŸ“¤ DATA COLLECTION HANDOFF<br/>Function: prepare_handoff()"]
        DCH_DATA["ğŸ“‹ HANDOFF DATA<br/>â€¢ Campaign ID<br/>â€¢ Requirements analysis<br/>â€¢ Target audience<br/>â€¢ Content strategy<br/>â€¢ Outline structure<br/>SIZE: 15KB"]
        CSR["ğŸ“¥ CONTENT RECEIVE<br/>Function: receive_data_handoff()"]
        DCH --> DCH_DATA --> CSR
    end
    
    subgraph "ğŸ“ CONTENT â†’ DESIGN"
        CDH["ğŸ“¤ CONTENT HANDOFF<br/>Function: prepare_design_handoff()"]
        CDH_DATA["ğŸ“‹ HANDOFF DATA<br/>â€¢ Generated content<br/>â€¢ Travel data integration<br/>â€¢ Mobile adaptations<br/>â€¢ Personalization rules<br/>â€¢ Content metadata<br/>SIZE: 29KB"]
        DSR["ğŸ“¥ DESIGN RECEIVE<br/>Function: receive_content_handoff()"]
        CDH --> CDH_DATA --> DSR
    end
    
    subgraph "ğŸ¨ DESIGN â†’ QUALITY"
        DQH["ğŸ“¤ DESIGN HANDOFF<br/>Function: prepare_quality_handoff()"]
        DQH_DATA["ğŸ“‹ HANDOFF DATA<br/>â€¢ MJML template<br/>â€¢ Design assets<br/>â€¢ Brand guidelines<br/>â€¢ Responsive rules<br/>â€¢ Dark mode configs<br/>SIZE: 40KB"]
        QSR["ğŸ“¥ QUALITY RECEIVE<br/>Function: receive_design_handoff()"]
        DQH --> DQH_DATA --> QSR
    end
    
    subgraph "âœ… QUALITY â†’ DELIVERY"
        QDH["ğŸ“¤ QUALITY HANDOFF<br/>Function: prepare_delivery_handoff()"]
        QDH_DATA["ğŸ“‹ HANDOFF DATA<br/>â€¢ Validated template<br/>â€¢ Quality reports<br/>â€¢ Test results<br/>â€¢ Performance metrics<br/>â€¢ Compliance status<br/>SIZE: 40KB"]
        DLR["ğŸ“¥ DELIVERY RECEIVE<br/>Function: receive_quality_handoff()"]
        QDH --> QDH_DATA --> DLR
    end
    
    %% VALIDATION POINTS
    V1["ğŸ” VALIDATION<br/>validate_data_collection()"]
    V2["ğŸ” VALIDATION<br/>Content completeness"]
    V3["ğŸ” VALIDATION<br/>validate_design_ai()"]
    V4["ğŸ” VALIDATION<br/>Multi-dimensional QA"]
    
    CSR --> V1
    DSR --> V2
    QSR --> V3
    DLR --> V4
    
    %% ERROR HANDLING
    ERR1["âŒ ERROR RECOVERY<br/>Rollback to previous state"]
    ERR2["âŒ ERROR RECOVERY<br/>Content regeneration"]
    ERR3["âŒ ERROR RECOVERY<br/>Design iteration"]
    ERR4["âŒ ERROR RECOVERY<br/>Quality re-validation"]
    
    V1 -.-> ERR1
    V2 -.-> ERR2
    V3 -.-> ERR3
    V4 -.-> ERR4
    
    style DCH fill:#4ecdc4,stroke:#45b7aa,color:white
    style CDH fill:#45b7d1,stroke:#3a9bc1,color:white
    style DQH fill:#96ceb4,stroke:#85b7a3,color:white
    style QDH fill:#feca57,stroke:#fd9644,color:white
    style DCH_DATA fill:#e8f8f5,stroke:#4ecdc4,color:black
    style CDH_DATA fill:#e3f2fd,stroke:#45b7d1,color:black
    style DQH_DATA fill:#f1f8e9,stroke:#96ceb4,color:black
    style QDH_DATA fill:#fff8e1,stroke:#feca57,color:black