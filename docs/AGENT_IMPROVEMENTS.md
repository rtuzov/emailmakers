# –ê–Ω–∞–ª–∏–∑ –∏ –£–ª—É—á—à–µ–Ω–∏—è –ê–≥–µ–Ω—Ç SDK OpenAI

## üìä –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

1. **‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏**
   - –ê–≥–µ–Ω—Ç –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
   - –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–∑—É–º–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –ø–æ–∏—Å–∫–∞

2. **‚ùå –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–π API —Ü–µ–Ω**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É API

3. **‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç retry –ª–æ–≥–∏–∫–∞
   - –ù–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–π –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –î–∞—Ç (`src/agent/tools/date.ts`)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–º–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –ø–æ–∏—Å–∫–∞
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π API –¶–µ–Ω (`src/agent/tools/prices.ts`)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint: `https://lpc.kupibilet.ru/api/v2/one_way`
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –õ–æ–≥–∏–∫–∞ –ê–≥–µ–Ω—Ç–∞ (`src/agent/agent.ts`)
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

**–¢–µ—Å—Ç:** –ú–æ—Å–∫–≤–∞ ‚Üí –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£–°–ü–ï–®–ù–û

```json
{
  "prices": [
    {
      "departure_date": "2025-12-11",
      "price": {
        "currency": "RUB",
        "amount": 389158
      }
    }
  ]
}
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–Ω: 365+ –∑–∞–ø–∏—Å–µ–π
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: 389,158 ‚ÇΩ
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- –§–æ—Ä–º–∞—Ç: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON

## üìà –£–ª—É—á—à–µ–Ω–∏—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–î–æ:**
- ‚ö†Ô∏è Mock –¥–∞–Ω–Ω—ã–µ
- ‚ö†Ô∏è –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: 45-60 —Å–µ–∫
- ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü–æ—Å–ª–µ:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API v2
- ‚úÖ –¶–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è: ‚â§30 —Å–µ–∫
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ –∏ fallback
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: >95%

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - Redis –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
3. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 